(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(27),r=n.n(o),c=(n(80),n(12)),s=n(1),l={SET_LIST_OF_FILMS:"set_list_of_films",SET_MOVIE_SESSIONS:"set_movies_sessions",SET_REQUEST_FIELD_VALUE:"set_request_field_value",CHANGING_GENRE_IN_SELECT:"changing_genre_in_select",START_LOADING:"start_loading",FINISH_LOADING:"finish_loading",BOOKING_TICKET:"booking_ticket",FINISH_BOOKING:"finish_booking",PREPARE_FOR_BOOKING_TICKET:"prepare_for_booking_ticket",CURRENT_PLACE:"current_place",SHOW_INFO:"show_info",REMOVE_INFO:"remove_info"},u={moviesList:[{name:"oh, there's nothing here :(",id:"1a"}],requestField:"",chosenGenre:-1,error:!1,isLoading:!1,sessionsList:[],movieId:null,isBookingTicket:!1,addInfForBooking:null,chosenPlaceId:null,row_id:null,place_position:null,isInfo:!1,info:null};var m=Object(c.c)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.SET_LIST_OF_FILMS:return Object(s.a)({},e,{moviesList:t.moviesList,requestField:""});case l.SET_MOVIE_SESSIONS:return Object(s.a)({},e,{sessionsList:t.sessionsList});case l.SET_REQUEST_FIELD_VALUE:return Object(s.a)({},e,{requestField:t.requestField});case l.CHANGING_GENRE_IN_SELECT:return Object(s.a)({},e,{chosenGenre:t.chosenGenre});case l.BOOKING_TICKET:return Object(s.a)({},e,{sessionsList:t.sessionsList,movieId:t.movieId,addInfForBooking:t.addInfForBooking,isBookingTicket:!0});case l.START_LOADING:return Object(s.a)({},e,{isLoading:!0});case l.FINISH_LOADING:return Object(s.a)({},e,{isLoading:!1});case l.FINISH_BOOKING:return Object(s.a)({},e,{isBookingTicket:!1});case l.PREPARE_FOR_BOOKING_TICKET:return Object(s.a)({},e);case l.CURRENT_PLACE:return Object(s.a)({},e,{chosenPlaceId:t.chosenPlaceId});case l.SHOW_INFO:return Object(s.a)({},e,{isInfo:!0,info:t.info});case l.REMOVE_INFO:return Object(s.a)({},e,{isInfo:!1,sessionsList:[],movieId:null,isBookingTicket:!1,addInfForBooking:null,chosenPlaceId:null,row_id:null,place_position:null,info:null});default:return Object(s.a)({},e)}}}),d=n(2),f=n(58),p=(n(85),n(3)),h=n(4),E=n(6),v=n(5),O=n(7),g=(n(86),n(185)),_=(n(87),function(){return a.a.createElement("div",{className:"loaderWrap"},a.a.createElement(g.a,{size:"massive",active:!0,inverted:!0}))}),I=(n(179),n(180),n(181),function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.columns,n=e.index,i=e.prepForBookTick,o=e.currentPlace;return a.a.createElement("li",{style:{position:"relative"}},a.a.createElement("span",{className:"rowNumericField"},"Row ",n),a.a.createElement("ul",{className:"cinemaRow"},t.map(function(e){var t=e.isFree,r="onePlace";return t?o===e._id&&(r+=" chosenPlace"):r="onePlace notFree",a.a.createElement("li",{className:r,key:e._id,"data-row":n,"data-place-position":e.position,"data-id":e._id,onClick:function(e){if(t)return i(e)}},e.position)})))}}]),t}(i.Component)),N=function(e){return 0===e.length&&(e=[{name:"oh, there's nothing here :(",id:"1a"}]),{type:l.SET_LIST_OF_FILMS,moviesList:e,requestField:""}},k=function(e){return{type:l.SET_MOVIE_SESSIONS,sessionsList:e}},S=function(e){return function(t,n){t(F());var i=e.target.dataset.movieId;window.location.hash="movieShows?movie_id=".concat(i);var a=n().todo.moviesList.find(function(e){return e._id===i}),o=[];fetch("https://cinema-api-test.herokuapp.com/movieShows?movie_id=".concat(i)).then(function(e){return e.text()}).then(function(e){o=JSON.parse(e),setTimeout(function(){return t(T())},1100),t(b(o,i,a))})}},b=function(e,t,n){return{type:l.BOOKING_TICKET,sessionsList:e,movieId:t,addInfForBooking:n}},F=function(){return{type:l.START_LOADING}},T=function(){return{type:l.FINISH_LOADING}},L=function(){return{type:l.FINISH_BOOKING}},w=function(e){return function(t,n){var i=e.target.dataset.id,a=e.target.dataset.row,o=e.target.dataset.placePosition;t(j(i,a,o))}},j=function(e,t,n){return{type:l.CURRENT_PLACE,chosenPlaceId:e,row_id:t,place_position:n}},C=function(){return function(e,t){e(F()),window.location.hash="bookingPlace";var n=t().todo,i=n.movieId,a=n.row_id,o=n.place_position;fetch("https://cinema-api-test.herokuapp.com/bookingPlace",{method:"POST",body:JSON.stringify({movieShow_id:i,row_id:a,place_position:o,isFree:!1})}).then(function(t){setTimeout(function(){return e(T())},1100),setTimeout(function(){return e(R(t.status))},1e3)})}},R=function(e){return{type:l.SHOW_INFO,info:e}},y=function(){return window.location.hash="movies",{type:l.REMOVE_INFO}};var B=Object(d.b)(function(e){return{currentPlace:e.todo.chosenPlaceId}},function(e){return{prepForBookTick:function(t){return e(w(t))}}})(I),G=(n(182),function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.info,n=e.removeInfo;return a.a.createElement("div",{className:"backgroundInfopanel"},a.a.createElement("div",{className:"infoPanel"},a.a.createElement("p",null,"Code: ",t),a.a.createElement("span",{className:"removeInfo",onClick:function(){return n()}},"ok")))}}]),t}(i.Component));var P=Object(d.b)(function(e){return{info:e.todo.info}},function(e){return{removeInfo:function(){return e(y())}}})(G),A=function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addInfForBooking,n=e.sessionsList,i=e.finishBooking,o=e.buyTicket,r=e.isInfo,c=n.ticketPrice,s=new Date(n.startTime),l=String(s.getHours()).padStart(2,"0"),u=String(s.getMinutes()).padStart(2,"0"),m=String(s.getDate()).padStart(2,"0"),d=String(s.getMonth()+1).padStart(2,"0"),f=s.getFullYear(),p=n.places;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"backgroundForBookingField"},a.a.createElement("div",{className:"bookingField"},a.a.createElement("div",{className:"bookingFieldMovieContainer"},a.a.createElement("span",{className:"close",onClick:function(){i()}},"Delete"),a.a.createElement("section",{className:"bookingFieldDetails"},a.a.createElement("div",{className:"filmPosterContainer"},a.a.createElement("img",{src:t.pictureLink,alt:t.name,title:t.name})),a.a.createElement("ul",{className:"bookingDescriptionList"},a.a.createElement("li",{className:"bookingMovieName"},t.name),a.a.createElement("li",{className:"screeningDate"},"Film starts at ",l,":",u,"(",m,"-",d,"-",f,")"),a.a.createElement("li",{className:"bookingDescriptionTitle"},'"',t.description,'"'),a.a.createElement("li",{className:"bookingTicketPrice"},"One ticket costs: ",c/10,"$"))),a.a.createElement("section",{className:"hallFieldContainer"},a.a.createElement("div",{className:"screenContainer"},a.a.createElement("p",null,"Screen")),a.a.createElement("ul",{className:"listOfPlaces"},p.map(function(e,t){return a.a.createElement(B,{key:t,columns:e,index:t})})),a.a.createElement("span",{className:"buyTicket",onClick:function(){return o()}},"Buy ticket"))))),r&&a.a.createElement(P,null))}}]),t}(i.Component);var D=Object(d.b)(function(e){return{addInfForBooking:e.todo.addInfForBooking,sessionsList:e.todo.sessionsList,isInfo:e.todo.isInfo}},function(e){return{finishBooking:function(){return e(L())},buyTicket:function(){return e(C())}}})(A),M=function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.pictureLink,i=e.dateOfRelease,o=e.description,r=e.movieId,c=e.getSessionsOfMovie,s=e.isBookingTicket,l=new Date(i),u=String(l.getDate()).padStart(2,"0"),m=String(l.getMonth()+1).padStart(2,"0"),d=l.getFullYear();return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"listItemContainer","data-movie-id":r},a.a.createElement("div",{className:"filmsPosterContainer",hidden:!i,onClick:function(e){return c(e)}},a.a.createElement("img",{src:n,alt:t,title:t,"data-movie-id":r})),a.a.createElement("ul",{className:"descriptionList"},a.a.createElement("li",{className:"movieName",onClick:function(e){return c(e)},"data-movie-id":r},t),a.a.createElement("li",{className:"movieRelease"},!!i&&"Release: ".concat(u,"-").concat(m,"-").concat(d)),a.a.createElement("li",{className:"descriptionTitle"},!!i&&o))),s&&a.a.createElement(D,null))}}]),t}(i.Component);var H=Object(d.b)(function(e){return{isBookingTicket:e.todo.isBookingTicket}},function(e){return{getSessionsOfMovie:function(t){return e(S(t))}}})(M),q=function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getListOfFilms(),this.props.getMoviesSessions()}},{key:"render",value:function(){var e=this.props,t=e.moviesList,n=e.requestField,i=e.setRequestFieldValue,o=e.handleChangeOfGenre,r=e.handleRequest,c=e.isLoading;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"mainHeader"},a.a.createElement("div",{className:"mainHeader_wrap"},a.a.createElement("h2",null,"Schedule"))),a.a.createElement("main",null,a.a.createElement("div",{className:"mainWrap"},a.a.createElement("ul",{className:"listOfTools"},a.a.createElement("li",{className:"listItemOfSearch"},a.a.createElement("input",{type:"text",placeholder:"Find a movie",className:"searchField",value:n,onChange:function(e){return i(e)}})),a.a.createElement("li",{className:"listItemSelect"},a.a.createElement("select",{className:"chosingGenere",onChange:function(e){return o(e)}},a.a.createElement("option",{value:-1},"GENRES"),a.a.createElement("option",{value:0},"ACTION"),a.a.createElement("option",{value:1},"ADVENTURES"),a.a.createElement("option",{value:2},"COMEDY"),a.a.createElement("option",{value:3},"DRAMA"),a.a.createElement("option",{value:4},"HORROR"),a.a.createElement("option",{value:5},"WESTERNS"))),a.a.createElement("li",{className:"listItemButton"},a.a.createElement("input",{type:"button",value:"Show films",onClick:function(){return r()}}))),a.a.createElement("ul",{className:"listOfMovies"},t.map(function(e){return a.a.createElement(H,{key:e._id,name:e.name,pictureLink:e.pictureLink,dateOfRelease:e.dateOfRelease,description:e.description,genre_id:e.genre_id,movieId:e._id})})))),c&&a.a.createElement(_,null))}}]),t}(i.Component),K=Object(d.b)(function(e){return{moviesList:e.todo.moviesList,requestField:e.todo.requestField,isLoading:e.todo.isLoading}},function(e){return{getListOfFilms:function(){return e(function(e){e(F());var t=[];window.location.hash="movies",fetch("https://cinema-api-test.herokuapp.com/movies").then(function(e){return e.text()}).then(function(n){t=JSON.parse(n),setTimeout(function(){return e(T())},1100),e(N(t))})})},getMoviesSessions:function(){return e(function(e){var t=[];fetch("https://cinema-api-test.herokuapp.com/movieShows").then(function(e){return e.text()}).then(function(n){t=JSON.parse(n),e(k(t))})})},setRequestFieldValue:function(t){return e(function(e){var t=e.target.value;return{type:l.SET_REQUEST_FIELD_VALUE,requestField:t}}(t))},handleChangeOfGenre:function(t){return e(function(e){var t=e.target.value;return{type:l.CHANGING_GENRE_IN_SELECT,chosenGenre:t}}(t))},handleRequest:function(){return e(function(e,t){e(F());var n=t().todo.chosenGenre,i=t().todo.requestField;if(n<0&&i.length<=0){var a=[];window.location.hash="movies",fetch("https://cinema-api-test.herokuapp.com/movies").then(function(e){return e.text()}).then(function(t){a=JSON.parse(t),setTimeout(function(){return e(T())},1100),e(N(a))})}else{if(n>=0&&i.length<=0){window.location.hash="movies/find?name&genres=".concat(n);var o=[];fetch("https://cinema-api-test.herokuapp.com/movies/find?name&genres=".concat(n)).then(function(e){return e.text()}).then(function(t){o=JSON.parse(t),setTimeout(function(){return e(T())},1100),e(N(o))})}if(n<0&&i.length>0){window.location.hash="movies/find?name=".concat(i,"&genres");var r=[];fetch("https://cinema-api-test.herokuapp.com/movies/find?name=".concat(i,"&genres")).then(function(e){return e.text()}).then(function(t){r=JSON.parse(t),setTimeout(function(){return e(T())},1100),e(N(r))})}if(n>=0&&i.length>0){window.location.hash="movies/find?name=".concat(i,"&genres=").concat(n);var c=[];fetch("https://cinema-api-test.herokuapp.com/movies/find?name=".concat(i,"&genres=").concat(n)).then(function(e){return e.text()}).then(function(t){c=JSON.parse(t),setTimeout(function(){return e(T())},1100),e(N(c))})}}})}}})(q),V=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(K,null))},x=Object(c.d)(m,Object(c.a)(f.a));var J=function(){return a.a.createElement(d.a,{store:x},a.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,n){e.exports=n(183)},80:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.8e32256f.chunk.js.map